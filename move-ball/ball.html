<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        canvas {
            display: block;
        }
    </style>
</head>

<body>
    <canvas></canvas>
    <script>
        let iWidth;
        let iHeight;
        window.onload = window.onresize = function () {
            iWidth = window.innerWidth;
            iHeight = window.innerHeight;

            function Ball(sName, r, dir_x, dir_y, color) {
                this.canvas = document.querySelector(sName)
                this.cxt = this.canvas.getContext("2d");
                this.iW = this.canvas.width = iWidth;
                this.iH = this.canvas.height = iHeight;
                this.r = r;
                this.dirX = dir_x;
                this.dirY = dir_y;
                this.color = color;
                this.moveX = this.iW / 2;
                this.moveY=this.iH/2;
            }

            Ball.prototype.init = function () {
                this.cxt.clearRect(0, 0, this.iW, this.iH);
                this.cxt.beginPath()
                this.cxt.fillStyle = this.color;
                this.cxt.arc(this.moveX, this.moveY, this.r, 0, 2 * Math.PI, true)
                this.cxt.fill()
            }

            Ball.prototype.update=function(){
                this.moveX+=this.dirX;
                this.moveY+=this.dirY;
                if(this.moveX>this.iW-this.r||this.moveX<this.r){
                    this.dirX=-this.dirX;
                }
                if(this.moveY>this.iH-this.r||this.moveY<this.r){
                    this.dirY=-this.dirY;
                }
                this.init()
            }


            let ball = new Ball('canvas', 40, 5, 5, 'gold')
            
            //移动
            function animate(){
                requestAnimationFrame(animate)
                ball.update()

            }
            animate()
        }
    </script>
</body>

</html>